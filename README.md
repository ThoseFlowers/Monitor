### Niubility-Monitor

这是一个Niubility的Monitor，想法源自[The Art of Readable Code](http://book.douban.com/subject/5442971/)，主要思想是利用可度量的单位，取得`空间`与`时间`上的平衡。


#### 实现原理

##### 基础原理

首先，我们采用一个可以`度量`的概念，`可度量的含义为：任一事件的发生必定在一个对应的时刻。`那么基于此，我们可以设计一个基于`单位时间`的定容空间来记录发生的所有我们感兴趣的事件。

单位时间的含义为，如我们的选取的监控间隔为`1minute`，那么单位时间可以定义为s。遵循如上的规则，可定义出任意规格的时间比例。

 | Time          | Time Unit     |
 | ------------- |:-------------:|
 | 1 hour        | 1 minute      |
 | 1 minute      | 1 second      |

采用单位时间的好处是，我们可以准确的定义出我们需要的`存储空间`。如以`1minute 1second`的度量来算，我们需要60个second的bucket用来记录每一秒钟发生事件的统计。
同样，我们的monitor-worker，不会随着单位时间内发生的事件的增多，而导致内存的开销成比例的增长。

另一方面，一个不容忽视的问题是，`统计误差`。当我们采用的单位时间为1second，也就是会产生1s的误差，因为当获取系统时间时，我们会有一个四舍五入的概念。
`例如60.4秒发生事件会被划分到60s里，60.5秒发生的事件会被划分到61s里。`相应的解决办法是，我们可以调整我们的单位时间到毫秒，乃至微妙。

在时间复杂度上，我们仅需要对有限个数的bucket（Time / Time Unit），进行统计就好了。
假设统计发生在函数调用时，那么时间复杂度为O(n)。一个可行的优化方法为，当有事件添加到对应的bucket中时，进行统计。这样当上层的调用产生时，就是一个O(1)的方法调用了。

以上就是一枚，基于时间桶的Monitor实现原理。

#### 项目构成
1. 项目结构
    * monitor-worker: 采集数据的节点
    * monitor-master: 汇聚数据的节点
2. 各个阶段目标
    * Part1: 完成worker节点，线程不安全的Demo
    * Part2: 完成worker节点，线程安全的Demo
    * Part3: 完成worker与master节点数据的汇聚